class ClassificationFundSet
  attr_accessor :parent_fund, :fund_a, :fund_b

  def initialize
    @parent_fund = ClassificationFund.new
    @fund_a = ClassificationFund.new
    @fund_b = ClassificationFund.new
  end

  def to_a
    [@parent_fund, @fund_a, @fund_b]
  end

  def calc_surplus_rate
    unless @parent_fund.net_value_yesterday.blank?
      @parent_fund.surplus_rate = (@fund_a.market_price.to_f + @fund_b.market_price.to_f)/2/@parent_fund.net_value_today.to_f
    end
  end

  def self.init_fund_set_array
    fund_codes = ['167503','150275','150276','160516','150225','150226','161022','150152','150153','161026','150209','150210','161024','150181','150182','161027','150223','150224','161028','150211','150212','161025','150194','150195','161029','150241','150242','164818','150247','150248','160218','150117','150118','160222','150198','150199','160219','150130','150131','160221','150196','150197','161223','150213','150214','164705','150169','150170','164905','150217','150218','160136','150295','150296','160629','150203','150204','160628','150192','150193','160639','150277','150278','160630','150205','150206','160632','150229','150230','160640','150279','150280','160626','150179','150180','160638','150273','150274','160631','150227','150228','160625','150177','150178','160633','150235','150236','160620','150100','150101','164402','150221','150222','163116','150231','150232','163115','150186','150187','163113','150171','150172','163114','150184','150185','164304','150190','150191','165521','150157','150158','165519','150148','150149','165520','150150','150151','165522','150173','150174','161831','150175','150176','161721','150207','150208','161725','150269','150270','161724','150251','150252','161720','150200','150201','161723','150249','150250','168201','150265','150266']
    fund_fees = [5,10,12,12,12,12,12,12,12,0,10,0,10,0,0.5,12,12,6,12,12,12,12,12,12,12,12,12,12,12,12,12,5,10,12,10,10,12,12,12,10,12,10,10,10,10,10,0]

    fund_set_array = Array.new

    fund_codes.each_with_index do |f, i|
      if i % 3 == 0
        fund_set = ClassificationFundSet.new
        fund_set.parent_fund.code = f
        fund_set.parent_fund.fee = fund_fees[i / 3]
        fund_set.fund_a.code = fund_codes[i+1]
        fund_set.fund_b.code = fund_codes[i+2]
        fund_set_array.push(fund_set)
      end
    end

    fund_set_array
  end
end